import{b as A,c as E}from"./system-e3daaa5f.js";import{d as K,_ as N,r as s,w as d,O as b,P,Y as l,W as o,c as _,Z as c,H as v,R as i,V as C,n as D}from"./vue-c727071f.js";import{P as j,Q as H,D as M,M as O,k as Q,R as W,C as Y,S as Z,b as $}from"./naive_ui-1fdfc3bf.js";import"./index-c5ed8602.js";const q={class:"mb-4 flex flex-col"},F={class:"flex flex-row mt-3 justify-between"},G={class:"flex flex-wrap flex-row sm:space-x-3"},J={class:"option-item"},X={class:"option-item"},ee={class:"option-item"},le={class:"flex items-center space-x-2"},ue=K({__name:"log_viewer",setup(ne){const{t:u}=N(),r=s(5),m=s("server"),y=s(),w=s(!0),p=s(100),f=s([]),x=s(["status","logs"]),k=s();d(()=>m.value,()=>{t()}),d(()=>p.value,()=>{t()});const U=()=>{D(()=>{var a;(a=k.value)==null||a.scrollTo({position:"bottom",slient:!1})})},t=()=>{m.value==="server"?A({max_lines:p.value,exclude_keywords:x.value}).then(a=>{y.value=a.data}):E({max_lines:p.value,exclude_keywords:f.value}).then(a=>{y.value=a.data}),w.value&&U()};t();let I=setInterval(()=>{t()},r.value*1e3);return d(()=>r.value,()=>{clearInterval(I),I=setInterval(()=>{t()},r.value*1e3)}),d(()=>x.value,()=>{t()}),d(()=>f.value,()=>{t()}),(a,e)=>{const L=j,h=H,g=M,B=O,S=Q,z=W,R=Y,T=Z,V=$;return b(),P("div",q,[l(h,{type:"segment",value:m.value,"onUpdate:value":e[0]||(e[0]=n=>m.value=n)},{default:o(()=>[l(L,{name:"server"},{default:o(()=>[_(c(v(u)("commons.serverLogs")),1)]),_:1}),l(L,{name:"proxy"},{default:o(()=>[_(c(v(u)("commons.proxyLogs")),1)]),_:1})]),_:1},8,["value"]),i("div",F,[i("div",G,[i("div",J,[l(g,null,{default:o(()=>[_(c(v(u)("commons.maxLineCount")),1)]),_:1}),l(B,{size:"small",value:p.value,"onUpdate:value":e[1]||(e[1]=n=>p.value=n),class:"w-27",min:100,max:2e3,step:100},null,8,["value"])]),i("div",X,[l(g,null,{default:o(()=>[_(c(v(u)("commons.updateInterval")),1)]),_:1}),l(S,{size:"small",value:r.value,"onUpdate:value":e[2]||(e[2]=n=>r.value=n),class:"w-20",options:[{label:"3s",value:3},{label:"5s",value:5},{label:"10s",value:10}]},null,8,["value"])]),i("div",ee,[l(g,null,{default:o(()=>[_(c(v(u)("commons.excludeKeywords")),1)]),_:1}),m.value==="proxy"?(b(),C(z,{key:0,size:"small",value:f.value,"onUpdate:value":e[3]||(e[3]=n=>f.value=n)},null,8,["value"])):(b(),C(z,{key:1,size:"small",value:x.value,"onUpdate:value":e[4]||(e[4]=n=>x.value=n)},null,8,["value"]))])]),i("div",le,[l(g,null,{default:o(()=>[_(c(v(u)("commons.autoScrolling")),1)]),_:1}),l(R,{value:w.value,"onUpdate:value":e[5]||(e[5]=n=>w.value=n),size:"small"},null,8,["value"])])]),l(V,{class:"mt-3 flex-grow h-full","content-style":{height:"100%"}},{default:o(()=>[l(T,{ref_key:"logInstRef",ref:k,"font-size":10,rows:40,lines:y.value},null,8,["lines"])]),_:1})])}}});export{ue as default};
//# sourceMappingURL=log_viewer-27b5d69f.js.map
