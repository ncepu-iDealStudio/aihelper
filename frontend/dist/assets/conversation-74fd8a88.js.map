{"version":3,"file":"conversation-74fd8a88.js","sources":["../../node_modules/@vicons/ionicons5/es/Close.js","../../node_modules/@vicons/ionicons5/es/CodeSlash.js","../../node_modules/@vicons/ionicons5/es/CopyOutline.js","../../node_modules/@vicons/material/es/PersonFilled.js","../../src/utils/conversation.ts"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M289.94 256l95-95A24 24 0 0 0 351 127l-95 95l-95-95a24 24 0 0 0-34 34l95 95l-95 95a24 24 0 1 0 34 34l95-95l95 95a24 24 0 0 0 34-34z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = [_hoisted_2]\nexport default defineComponent({\n  name: 'Close',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_3)\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M160 389a20.91 20.91 0 0 1-13.82-5.2l-128-112a21 21 0 0 1 0-31.6l128-112a21 21 0 0 1 27.66 31.61L63.89 256l109.94 96.19A21 21 0 0 1 160 389z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M352 389a21 21 0 0 1-13.84-36.81L448.11 256l-109.94-96.19a21 21 0 0 1 27.66-31.61l128 112a21 21 0 0 1 0 31.6l-128 112A20.89 20.89 0 0 1 352 389z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_4 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M208 437a21 21 0 0 1-20.12-27l96-320a21 21 0 1 1 40.23 12l-96 320A21 21 0 0 1 208 437z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_5 = [_hoisted_2, _hoisted_3, _hoisted_4]\nexport default defineComponent({\n  name: 'CodeSlash',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_5)\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'rect',\n  {\n    x: '128',\n    y: '128',\n    width: '336',\n    height: '336',\n    rx: '57',\n    ry: '57',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linejoin': 'round',\n    'stroke-width': '32'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M383.5 128l.5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-linejoin': 'round',\n    'stroke-width': '32'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_4 = [_hoisted_2, _hoisted_3]\nexport default defineComponent({\n  name: 'CopyOutline',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_4)\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 24 24'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4s-4 1.79-4 4s1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = [_hoisted_2]\nexport default defineComponent({\n  name: 'PersonFilled',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_3)\n  }\n})\n","import { useConversationStore } from \"@/store\";\r\nimport { ChatConversationDetail, ChatMessage } from \"@/types/custom\";\r\n\r\n// 使用以下函数前需要确保调用了 conversationStore.fetchConversationHistory\r\n\r\nexport function getConvMessageListFromId(conversation_id: string | null) {\r\n  const conversationStore = useConversationStore();\r\n  const result:any = [];\r\n  if (!conversation_id) return [];\r\n  const conv: ChatConversationDetail =\r\n    conversationStore.conversationDetailMap[conversation_id];\r\n  if (conv) {\r\n    let x = conv.current_node as any;\r\n    while (!!x) {\r\n      if (conv.mapping![x].message) result.push(conv.mapping![x]);\r\n      x = conv.mapping![x].parent;\r\n    }\r\n    result.reverse();\r\n  }\r\n  return result;\r\n}\r\n\r\nexport const getModelNameFromConv = (\r\n  conv: ChatConversationDetail\r\n): string | null => {\r\n  let result = null;\r\n  let current_node = conv.current_node as any;\r\n  while (current_node) {\r\n    var node = conv.mapping![current_node];\r\n    if (node.model_slug) {\r\n      result = node.model_slug;\r\n      break;\r\n    }\r\n    current_node = node.parent;\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getModelNameFromMessages = (\r\n  messages: Array<ChatMessage>\r\n): string | null => {\r\n  let result = null;\r\n  for (let i = messages.length - 1; i >= 0; i--) {\r\n    if (messages[i].model_slug) {\r\n      result = messages[i].model_slug || null;\r\n      break;\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getModelNameFromConvId = (\r\n  conversation_id: string | null\r\n): string | null => {\r\n  if (!conversation_id) return null;\r\n  const conversationStore = useConversationStore();\r\n  const conv: ChatConversationDetail =\r\n    conversationStore.conversationDetailMap[conversation_id];\r\n  if (conv) return getModelNameFromConv(conv);\r\n  else return null;\r\n};\r\n"],"names":["_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","Close","defineComponent","_ctx","_cache","_openBlock","_createElementBlock","_hoisted_4","_hoisted_5","CodeSlash","CopyOutline","PersonFilled","getConvMessageListFromId","conversation_id","conversationStore","useConversationStore","result","conv","x","getModelNameFromMessages","messages","i"],"mappings":"8FACA,MAAMA,EAAa,CACjB,MAAO,6BACP,cAAe,+BACf,QAAS,aACX,EACMC,EAA2BC,EAC/B,OACA,CACE,EAAG,sIACH,KAAM,cACP,EACD,KACA,EAEF,EACMC,EAAa,CAACF,CAAU,EAC9BG,EAAeC,EAAgB,CAC7B,KAAM,QACN,OAAQ,SAAgBC,EAAMC,EAAQ,CACpC,OAAOC,EAAU,EAAIC,EAAoB,MAAOT,EAAYG,CAAU,CACvE,CACH,CAAC,ECrBKH,EAAa,CACjB,MAAO,6BACP,cAAe,+BACf,QAAS,aACX,EACMC,EAA2BC,EAC/B,OACA,CACE,EAAG,+IACH,KAAM,cACP,EACD,KACA,EAEF,EACMC,EAA2BD,EAC/B,OACA,CACE,EAAG,mJACH,KAAM,cACP,EACD,KACA,EAEF,EACMQ,EAA2BR,EAC/B,OACA,CACE,EAAG,yFACH,KAAM,cACP,EACD,KACA,EAEF,EACMS,EAAa,CAACV,EAAYE,EAAYO,CAAU,EACtDE,EAAeP,EAAgB,CAC7B,KAAM,YACN,OAAQ,SAAgBC,EAAMC,EAAQ,CACpC,OAAOC,EAAU,EAAIC,EAAoB,MAAOT,EAAYW,CAAU,CACvE,CACH,CAAC,ECzCKX,EAAa,CACjB,MAAO,6BACP,cAAe,+BACf,QAAS,aACX,EACMC,EAA2BC,EAC/B,OACA,CACE,EAAG,MACH,EAAG,MACH,MAAO,MACP,OAAQ,MACR,GAAI,KACJ,GAAI,KACJ,KAAM,OACN,OAAQ,eACR,kBAAmB,QACnB,eAAgB,IACjB,EACD,KACA,EAEF,EACMC,EAA2BD,EAC/B,OACA,CACE,EAAG,sGACH,KAAM,OACN,OAAQ,eACR,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,IACjB,EACD,KACA,EAEF,EACMQ,EAAa,CAACT,EAAYE,CAAU,EAC1CU,EAAeR,EAAgB,CAC7B,KAAM,cACN,OAAQ,SAAgBC,EAAMC,EAAQ,CACpC,OAAOC,EAAU,EAAIC,EAAoB,MAAOT,EAAYU,CAAU,CACvE,CACH,CAAC,EC3CKV,EAAa,CACjB,MAAO,6BACP,cAAe,+BACf,QAAS,WACX,EACMC,EAA2BC,EAC/B,OACA,CACE,EAAG,iHACH,KAAM,cACP,EACD,KACA,EAEF,EACMC,EAAa,CAACF,CAAU,EAC9Ba,EAAeT,EAAgB,CAC7B,KAAM,eACN,OAAQ,SAAgBC,EAAMC,EAAQ,CACpC,OAAOC,EAAU,EAAIC,EAAoB,MAAOT,EAAYG,CAAU,CACvE,CACH,CAAC,ECjBM,SAASY,EAAyBC,EAAgC,CACvE,MAAMC,EAAoBC,IACpBC,EAAa,CAAA,EACnB,GAAI,CAACH,EAAiB,MAAO,GACvB,MAAAI,EACJH,EAAkB,sBAAsBD,CAAe,EACzD,GAAII,EAAM,CACR,IAAIC,EAAID,EAAK,aACN,KAAEC,GACHD,EAAK,QAASC,CAAC,EAAE,SAASF,EAAO,KAAKC,EAAK,QAASC,CAAC,CAAC,EACtDA,EAAAD,EAAK,QAASC,CAAC,EAAE,OAEvBF,EAAO,QAAQ,EAEV,OAAAA,CACT,CAkBa,MAAAG,EACXC,GACkB,CAClB,IAAIJ,EAAS,KACb,QAASK,EAAID,EAAS,OAAS,EAAGC,GAAK,EAAGA,IACpC,GAAAD,EAASC,CAAC,EAAE,WAAY,CACjBL,EAAAI,EAASC,CAAC,EAAE,YAAc,KACnC,MAGG,OAAAL,CACT","x_google_ignoreList":[0,1,2,3]}