import{H as N,r as j,b as rn,I as an,J as ln,w as _t,K as cn,n as un,L as dn,e as oe,M as ge,N as pn,d as U,O as A,P as x,Q as fn,R as _,S as mn,U as hn,V as J,W as y,F as gt,X as vt,Y as v,Z as F,c as Y,l as z,_ as _n,$ as gn,a0 as Pe,a1 as vn,G as wn}from"./vue-c727071f.js";import{c as yn,l as Cn,d as wt,u as bn,_ as yt,a as Ct,b as bt,e as De,N as Fe,f as En,g as An,h as Et,i as At,j as St,k as Sn,m as Pn,n as On,o as Tn,p as xn,q as kn,r as Rn}from"./naive_ui-1fdfc3bf.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var Ge;const Pt=typeof window<"u",Nn=e=>typeof e=="function",Un=e=>typeof e=="string",Mn=()=>{};Pt&&((Ge=window==null?void 0:window.navigator)!=null&&Ge.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Be(e){return typeof e=="function"?e():N(e)}function Ln(e,t){function n(...o){return new Promise((s,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(s).catch(r)})}return n}const Ot=e=>e();function In(e=Ot){const t=j(!0);function n(){t.value=!1}function o(){t.value=!0}const s=(...r)=>{t.value&&e(...r)};return{isActive:rn(t),pause:n,resume:o,eventFilter:s}}function $n(e){return e}function Dn(e){return an()?(ln(e),!0):!1}var We=Object.getOwnPropertySymbols,Fn=Object.prototype.hasOwnProperty,Bn=Object.prototype.propertyIsEnumerable,jn=(e,t)=>{var n={};for(var o in e)Fn.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&We)for(var o of We(e))t.indexOf(o)<0&&Bn.call(e,o)&&(n[o]=e[o]);return n};function Vn(e,t,n={}){const o=n,{eventFilter:s=Ot}=o,r=jn(o,["eventFilter"]);return _t(e,Ln(s,t),r)}var qn=Object.defineProperty,zn=Object.defineProperties,Hn=Object.getOwnPropertyDescriptors,me=Object.getOwnPropertySymbols,Tt=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable,Je=(e,t,n)=>t in e?qn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gn=(e,t)=>{for(var n in t||(t={}))Tt.call(t,n)&&Je(e,n,t[n]);if(me)for(var n of me(t))xt.call(t,n)&&Je(e,n,t[n]);return e},Wn=(e,t)=>zn(e,Hn(t)),Jn=(e,t)=>{var n={};for(var o in e)Tt.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&me)for(var o of me(e))t.indexOf(o)<0&&xt.call(e,o)&&(n[o]=e[o]);return n};function Kn(e,t,n={}){const o=n,{eventFilter:s}=o,r=Jn(o,["eventFilter"]),{eventFilter:i,pause:c,resume:d,isActive:l}=In(s);return{stop:Vn(e,t,Wn(Gn({},r),{eventFilter:i})),pause:c,resume:d,isActive:l}}function Qn(e){var t;const n=Be(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Re=Pt?window:void 0;function Ke(...e){let t,n,o,s;if(Un(e[0])||Array.isArray(e[0])?([n,o,s]=e,t=Re):[t,n,o,s]=e,!t)return Mn;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],i=()=>{r.forEach(u=>u()),r.length=0},c=(u,f,C,h)=>(u.addEventListener(f,C,h),()=>u.removeEventListener(f,C,h)),d=_t(()=>[Qn(t),Be(s)],([u,f])=>{i(),u&&r.push(...n.flatMap(C=>o.map(h=>c(u,C,h,f))))},{immediate:!0,flush:"post"}),l=()=>{d(),i()};return Dn(l),l}const Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ue="__vueuse_ssr_handlers__";Ne[Ue]=Ne[Ue]||{};const Xn=Ne[Ue];function Yn(e,t){return Xn[e]||t}function Zn(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var eo=Object.defineProperty,Qe=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,no=Object.prototype.propertyIsEnumerable,Xe=(e,t,n)=>t in e?eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ye=(e,t)=>{for(var n in t||(t={}))to.call(t,n)&&Xe(e,n,t[n]);if(Qe)for(var n of Qe(t))no.call(t,n)&&Xe(e,n,t[n]);return e};const oo={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},Ze="vueuse-storage";function he(e,t,n,o={}){var s;const{flush:r="pre",deep:i=!0,listenToStorageChanges:c=!0,writeDefaults:d=!0,mergeDefaults:l=!1,shallow:u,window:f=Re,eventFilter:C,onError:h=b=>{console.error(b)}}=o,p=(u?cn:j)(t);if(!n)try{n=Yn("getDefaultStorage",()=>{var b;return(b=Re)==null?void 0:b.localStorage})()}catch(b){h(b)}if(!n)return p;const m=Be(t),P=Zn(m),O=(s=o.serializer)!=null?s:oo[P],{pause:M,resume:L}=Kn(p,()=>I(p.value),{flush:r,deep:i,eventFilter:C});return f&&c&&(Ke(f,"storage",$),Ke(f,Ze,E)),$(),p;function I(b){try{if(b==null)n.removeItem(e);else{const R=O.write(b),V=n.getItem(e);V!==R&&(n.setItem(e,R),f&&f.dispatchEvent(new CustomEvent(Ze,{detail:{key:e,oldValue:V,newValue:R,storageArea:n}})))}}catch(R){h(R)}}function g(b){const R=b?b.newValue:n.getItem(e);if(R==null)return d&&m!==null&&n.setItem(e,O.write(m)),m;if(!b&&l){const V=O.read(R);return Nn(l)?l(V,m):P==="object"&&!Array.isArray(V)?Ye(Ye({},m),V):V}else return typeof R!="string"?R:O.read(R)}function E(b){$(b.detail)}function $(b){if(!(b&&b.storageArea!==n)){if(b&&b.key==null){p.value=m;return}if(!(b&&b.key!==e)){M();try{p.value=g(b)}catch(R){h(R)}finally{b?un(L):L()}}}}}var et;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(et||(et={}));var so=Object.defineProperty,tt=Object.getOwnPropertySymbols,ro=Object.prototype.hasOwnProperty,io=Object.prototype.propertyIsEnumerable,nt=(e,t,n)=>t in e?so(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ao=(e,t)=>{for(var n in t||(t={}))ro.call(t,n)&&nt(e,n,t[n]);if(tt)for(var n of tt(t))io.call(t,n)&&nt(e,n,t[n]);return e};const lo={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};ao({linear:$n},lo);const co={notLogin:"Not logged in",siteTitle:"ChatGPT",confirm:"Confirm",stayInCurrentPage:"Stay on this page",username:"Username",password:"Password",login:"Log in",logout:"Log out",logoutSuccess:"Logged out successfully",newConversation:"New conversation",confirmDialogTitle:"Confirm action",cancel:"Cancel",delete:"Delete",rename:"Rename",adminPanel:"Admin Panel",userManagement:"User Management",conversationManagement:"Conversation Management",nickname:"Nickname",email:"Email",isSuperuser:"Superuser",yes:"Yes",no:"No",actions:"Actions",addUser:"Add user",addUserSuccess:"User added successfully",addUserFailed:"Failed to add user",title:"Title",createTime:"Creation time",usePaidModel:"Model",belongToUser:"Belongs to user",isValid:"Valid",isPublic:"Public",deleteInvalidConversations:"Destroy invalid conversations",deleteInvalidConversationsConfirm:"Are you sure you want to delete all invalid conversations from the database?",deleteSuccess:"Deleted successfully",deleteFailed:"Failed to delete",deleteUser:"Delete user",resetPassword:"Reset password",neverActive:"Never logged in",activeTime:"Last active time",serverStatus:"Server status",activeUserIn5m:"Active in last 5 minutes",activeUserIn1h:"Active in last 1 hour",activeUserIn1d:"Active in last 1 day",isChatbotBusy:"Processing replies",person:"Person",chatbotWaitingCount:"Users Waiting for Reply",deleteConversation:"Delete conversation",invalidateConversation:"Mark as invalid",vanishConversation:"Destroy conversation",shaModel:"Default",paidModel:"Legacy",currentConversationModel:"Model currently used in this conversation",canUsePaidModel:"Allow use of paid model",maxConversationCount:"Max number of conversations",availableAskCount:"Available Ask Count",unlimited:"Unlimited",setUserLimit:"Set user limit",setUserLimitSuccess:"User limit set successfully",vanishOrphanConversations:"Destroy all conversations without a user",empty:"Empty",chooseUser:"Choose user",chooseUserToAssign:"Assign current conversation to user",withdrawMessage:"Withdraw message",askingChatStatus:"Asking",queueingChatStatus:"Queuing",idlingChatStatus:"Idle",userProfile:"User Profile",status:"Status",copiedToClipboard:"Copied to clipboard",send:"Send",modelName:"Model Name",gpt4Model:"GPT-4",unknown:"未知",availableGPT4AskCount:"Available GPT-4 Ask Count",canUseGPT4Model:"Allow GPT-4",logViewer:"Log Viewer",serverLogs:"Server Logs",proxyLogs:"Reverse Proxy Logs",updateInterval:"Refresh Interval",autoScrolling:"Auto Scroll",maxLineCount:"Max Line Count",excludeKeywords:"Exclude Keywords",conversation:"Conversation",enterConversation:"Enter Conversation",systemManagement:"System Management",promptManagement:"prompt Management",statisticsInfo:"Statistics",userCountAndOnlineCount:"Active / Total Users",conversationCount:"Valid / Total Conversations",serverOverview:"Overview",chatbotStatus:"Reply Status",startUpDuration:"Run Time",totalRequestsCount:"Total Number of Requests",requestUsers:"Request Users",requestUsersCount:"Number of requesting users",gpt4AskUsers:"Who used GPT-4",normalAskUsers:"Who used normal",normalAskCount:"Normal Model Ask Count",gpt4AskCount:"GPT-4 Model Ask Count",askRequestsCount:"Ask Count",sumOfGpt4AskDuration:"Total time spent on GPT-4 dialogue",sumOfNormalAskDuration:"The total time spent on ordinary conversations",download:"download",toSharedMode:"Switch to shared mode",toIndependentMode:"Switch to independent mode"},uo={403:"403 error: access denied",404:"404 Not Found",loginExpired:"Login expired",userNotLogin:"User not logged in",askError:"Failed to get reply",conversationNotFound:"Conversation not found",conversationAlreadyDeleted:"Conversation already deleted",conversationTitleAlreadyGenerated:"Conversation title already generated",unauthorized:"Unauthorized",missingMessage:"Missing message content",missingConversationId:"Missing conversation_id",paidModelNotAvailable:"Paid model not available",userNotAllowToUsePaidModel:"User not allowed to use paid model",timeout:"Request timeout",chatgptResponseError:"Error returned by ChatGPT",unknownError:"Unknown error",requestValidationError:"Request parameter error",userAlreadyExists:"User already exists",badCredentials:"Incorrect username or password",maxConversationCountReached:"Max number of conversations reached",cannotConnectMoreThanOneClient:"Current user has a conversation waiting for reply, cannot request again",noAvailableAskCount:"No Available Ask Count!",noAvailableGPT4AskCount:"No Available GPT-4 Ask Count!",userNotAllowToUseGPT4Model:"Not allowed to use GPT-4 model",noUserSelected:"No User Selected",httpError:"HTTP Error",apikeyInvalid:"api_key Invalid"},po={loginExpired:"Login expired. Do you want to go to the login page?",pleaseEnterUsername:"Please enter username",pleaseEnterPassword:"Please enter password",waiting:"Thinking...",queueing:"Replying to other users, in queue...",deleteConversation:"Are you sure you want to delete this conversation? You cannot access this conversation anymore.",deleteConversationSuccess:"Deleted successfully",deleteConversationFailed:"Failed to delete",changeConversationTitleSuccess:"Title changed successfully",changeConversationTitleFailed:"Failed to change title",rename:"Please enter new title",sendMessage:"Please enter message, press Shift+Enter to send",logoutConfirm:"Are you sure you want to log out?",pleaseEnterNickname:"Please enter nickname",pleaseEnterEmail:"Please enter email",deleteUserConfirm:"Are you sure you want to delete this user?",deleteUserSuccess:"Deleted successfully",deleteUserFailed:"Failed to delete",resetPassword:"Please enter new password",resetUserPasswordSuccess:"Password changed successfully",resetUserPasswordFailed:"Failed to change password",success:"Success",failed:"Failed",requestSuccess:"Request succeeded",requestFailed:"Request failed",invalidateConversation:"Are you sure you want to mark these conversations as invalid? It will no longer appear in the user list.",vanishConversation:"Are you sure you want to destroy this conversation? It will be removed from the database and the records on the OpenAI account will be cleared.",conversationTitle:"Enter conversation title, leave blank to use default title",whetherUsePaidModel:"Please choose the model to use, leave blank to use default model",loadConversation:"Select a conversation from the left to load, or",newConversation:"start a new conversation",loginSuccess:"Logged in successfully",jumpingPage:"Jumping...",terminated:"Connection terminated by the server",loading:"Loading...",pleaseSelectConversation:"Please select a conversation first",pressEscToExitFullscreen:"Full Screen | Press Esc To Exit",refreshed:"Refreshed Successfully",autoScrolling:"auto scroll"},fo={nickname:"Nickname",is_superuser:"Is Admin",active_time:"Last active time",chat_status:"Current status",can_use_paid:"Allow to use paid model",can_use_gpt4:"Allow to use GPT-4 model",max_conv_count:"Max number of conversations",available_ask_count:"Available ask count",available_gpt4_ask_count:"Available GPT-4 ask count"},mo={commons:co,errors:uo,tips:po,labels:fo},ho={notLogin:"未登录",siteTitle:"AI助手",confirm:"确定",stayInCurrentPage:"留在此页",username:"用户名",password:"密码",login:"登录",logout:"退出登录",logoutSuccess:"登出成功",newConversation:"新对话",confirmDialogTitle:"确认操作",cancel:"取消",delete:"删除",rename:"重命名",adminPanel:"管理面板",userManagement:"用户管理",conversationManagement:"会话管理",nickname:"昵称",email:"邮箱",isSuperuser:"管理员",yes:"是",no:"否",actions:"操作",addUser:"添加用户",addUserSuccess:"添加用户成功",addUserFailed:"添加用户失败",title:"标题",createTime:"创建时间",modelName:"模型",belongToUser:"所属用户",isValid:"是否有效",isPublic:"是否公开",deleteInvalidConversations:"销毁无效会话",deleteInvalidConversationsConfirm:"确定要从数据库销毁所有失效会话吗？",deleteSuccess:"删除成功",deleteFailed:"删除失败",deleteUser:"删除用户",resetPassword:"修改密码",neverActive:"从未登录",activeTime:"最后活动时间",serverStatus:"服务状态",activeUserIn5m:"5分钟内活跃",activeUserIn1h:"1小时内活跃",activeUserIn1d:"1天内活跃",isChatbotBusy:"处理回复中",person:"人",chatbotWaitingCount:"回复排队人数",deleteConversation:"删除会话",invalidateConversation:"标记为无效",vanishConversation:"彻底删除对话",shaModel:"Default",paidModel:"Legacy",currentConversationModel:"当前对话使用的模型",canUsePaidModel:"允许paid模型",maxConversationCount:"最大对话数",availableAskCount:"剩余提问次数",unlimited:"不限",setUserLimit:"设置用户限制",setUserLimitSuccess:"设置用户限制成功",vanishOrphanConversations:"销毁所有无用户归属的会话",empty:"无",chooseUser:"选择用户",chooseUserToAssign:"分配当前对话给用户",withdrawMessage:"撤回消息",status:"状态",askingChatStatus:"回复中",queueingChatStatus:"排队中",idlingChatStatus:"空闲",userProfile:"用户信息",copiedToClipboard:"已复制到剪贴板",send:"发送",gpt4Model:"GPT-4",unknown:"未知",availableGPT4AskCount:"剩余GPT-4对话次数",canUseGPT4Model:"允许GPT-4",logViewer:"日志记录",serverLogs:"服务器日志",proxyLogs:"反向代理日志",updateInterval:"刷新间隔",autoScrolling:"自动滚动",maxLineCount:"行数",usePaidModel:"使用paid模型",excludeKeywords:"排除关键词",conversation:"对话",enterConversation:"进入对话",systemManagement:"系统管理",promptManagement:"prompt管理",statisticsInfo:"统计信息",userCountAndOnlineCount:"活跃用户 / 总用户",conversationCount:"有效 / 总对话数量",chatbotStatus:"回复状态",serverOverview:"服务概况",totalRequestsCount:"请求总数量",startUpDuration:"运行时长",requestUsers:"请求用户",requestUsersCount:"请求用户数量",normalAskCount:"普通模型回复次数",normalAskUsers:"使用普通模型",gpt4AskUsers:"使用GPT-4模型",gpt4AskCount:"GPT-4模型回复次数",askRequestsCount:"对话次数",sumOfNormalAskDuration:"普通对话总耗时",sumOfGpt4AskDuration:"GPT-4对话总耗时",download:"下载",toSharedMode:"切换到共享模式",toIndependentMode:"切换到独立模式"},_o={403:"403 错误：无访问权限",404:"404 错误：页面不存在",loginExpired:"登录已过期",userNotLogin:"用户未登录",askError:"获取回复失败",conversationNotFound:"会话不存在",conversationAlreadyDeleted:"会话已被删除",conversationTitleAlreadyGenerated:"会话标题已生成",unauthorized:"未授权",missingMessage:"缺少消息内容",missingConversationId:"缺少conversation_id",paidModelNotAvailable:"付费模型不可用",userNotAllowToUsePaidModel:"用户不允许使用付费模型",userNotAllowToUseGPT4Model:"用户不允许使用GPT-4模型",noAvailableAskCount:"剩余提问次数不足",noAvailableGPT4AskCount:"GPT-4模型剩余提问次数不足",timeout:"请求超时",chatgptResponseError:"ChatGPT返回错误",unknownError:"未知错误",requestValidationError:"请求参数错误",userAlreadyExists:"用户已存在",badCredentials:"用户名或密码错误",maxConversationCountReached:"会话数量已达上限",cannotConnectMoreThanOneClient:"当前用户已有对话等待回复，不能再次请求",noUserSelected:"未选择用户",httpError:"HTTP错误",apikeyInvalid:"无效api_key"},go={loginExpired:"登录已过期。是否跳转到登录页面？",pleaseEnterUsername:"请输入用户名",pleaseEnterPassword:"请输入密码",waiting:"正在思考中...",queueing:"正在回复其他用户，排队中...",deleteConversation:"确定要删除该会话吗？将无法找回历史记录！",deleteConversationSuccess:"删除成功",deleteConversationFailed:"删除失败",changeConversationTitleSuccess:"更改标题成功",changeConversationTitleFailed:"更改标题失败",rename:"请输入新标题",sendMessage:"请输入内容，使用 Shift+Enter 发送",logoutConfirm:"确定要退出登录吗？",pleaseEnterNickname:"请输入昵称",pleaseEnterEmail:"请输入邮箱",deleteUserConfirm:"确定要删除用户吗？",deleteUserSuccess:"删除成功",deleteUserFailed:"删除失败",resetPassword:"请输入新密码",resetUserPasswordSuccess:"修改密码成功",resetUserPasswordFailed:"修改密码失败",success:"成功",failed:"失败",requestSuccess:"请求成功",requestFailed:"请求失败",invalidateConversation:"确定要将这些会话标记为invalid吗？将不再出现在用户列表。",vanishConversation:"确定要彻底删除该会话吗？将在 OpenAI 账户上删除对话，并在数据库中删除对应记录。",conversationTitle:"输入对话标题，为空则使用默认标题",whetherUsePaidModel:"请选择使用的模型，为空则使用默认模型",loadConversation:"请从左侧选择对话以加载，或者",newConversation:"发起新对话",loginSuccess:"登录成功",jumpingPage:"正在跳转……",terminated:"连接被服务端终止",loading:"正在加载...",pleaseSelectConversation:"请先选择一个对话",pressEscToExitFullscreen:"已进入全屏，单击Esc退出全屏",refreshed:"已刷新",autoScrolling:"自动滚动"},vo={nickname:"昵称",is_superuser:"是否管理员",active_time:"最后活动时间",chat_status:"当前状态",can_use_paid:"是否可用付费模型",can_use_gpt4:"是否可用GPT-4模型",max_conv_count:"最大对话数量",available_ask_count:"剩余可询问次数",available_gpt4_ask_count:"剩余GPT-4可询问次数"},wo={commons:ho,errors:_o,tips:go,labels:vo};let Z;const yo=()=>{Z=dn({legacy:!1,locale:he("language","zh-CN").value,messages:{"en-US":{...mo},"zh-CN":{...wo}}})},Co=e=>{Z.global.locale.value=e};yo();const kt=j(he("theme","light").value),bo=oe(()=>({theme:kt.value==="light"?Cn:wt})),{message:H,notification:Ii,dialog:ne,loadingBar:$i}=yn(["message","dialog","notification","loadingBar"],{configProviderProps:bo}),Eo=bn(),Rt=ge("app",{state:()=>({theme:he("theme",Eo.value),language:he("language","zh")}),getters:{},actions:{toggleTheme(){this.theme=this.theme==="dark"?"light":"dark",kt.value=this.theme},setLanguage(e){this.language=e,Co(e)}}});function Nt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ao}=Object.prototype,{getPrototypeOf:je}=Object,ve=(e=>t=>{const n=Ao.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),W=e=>(e=e.toLowerCase(),t=>ve(t)===e),we=e=>t=>typeof t===e,{isArray:re}=Array,ae=we("undefined");function So(e){return e!==null&&!ae(e)&&e.constructor!==null&&!ae(e.constructor)&&B(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ut=W("ArrayBuffer");function Po(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ut(e.buffer),t}const Oo=we("string"),B=we("function"),Mt=we("number"),ye=e=>e!==null&&typeof e=="object",To=e=>e===!0||e===!1,ue=e=>{if(ve(e)!=="object")return!1;const t=je(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},xo=W("Date"),ko=W("File"),Ro=W("Blob"),No=W("FileList"),Uo=e=>ye(e)&&B(e.pipe),Mo=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||B(e.append)&&((t=ve(e))==="formdata"||t==="object"&&B(e.toString)&&e.toString()==="[object FormData]"))},Lo=W("URLSearchParams"),Io=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function le(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,s;if(typeof e!="object"&&(e=[e]),re(e))for(o=0,s=e.length;o<s;o++)t.call(null,e[o],o,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let c;for(o=0;o<i;o++)c=r[o],t.call(null,e[c],c,e)}}function Lt(e,t){t=t.toLowerCase();const n=Object.keys(e);let o=n.length,s;for(;o-- >0;)if(s=n[o],t===s.toLowerCase())return s;return null}const It=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),$t=e=>!ae(e)&&e!==It;function Me(){const{caseless:e}=$t(this)&&this||{},t={},n=(o,s)=>{const r=e&&Lt(t,s)||s;ue(t[r])&&ue(o)?t[r]=Me(t[r],o):ue(o)?t[r]=Me({},o):re(o)?t[r]=o.slice():t[r]=o};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&le(arguments[o],n);return t}const $o=(e,t,n,{allOwnKeys:o}={})=>(le(t,(s,r)=>{n&&B(s)?e[r]=Nt(s,n):e[r]=s},{allOwnKeys:o}),e),Do=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Fo=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Bo=(e,t,n,o)=>{let s,r,i;const c={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),r=s.length;r-- >0;)i=s[r],(!o||o(i,e,t))&&!c[i]&&(t[i]=e[i],c[i]=!0);e=n!==!1&&je(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},jo=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},Vo=e=>{if(!e)return null;if(re(e))return e;let t=e.length;if(!Mt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},qo=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&je(Uint8Array)),zo=(e,t)=>{const o=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=o.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},Ho=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},Go=W("HTMLFormElement"),Wo=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,s){return o.toUpperCase()+s}),ot=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Jo=W("RegExp"),Dt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};le(n,(s,r)=>{t(s,r,e)!==!1&&(o[r]=s)}),Object.defineProperties(e,o)},Ko=e=>{Dt(e,(t,n)=>{if(B(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(B(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Qo=(e,t)=>{const n={},o=s=>{s.forEach(r=>{n[r]=!0})};return re(e)?o(e):o(String(e).split(t)),n},Xo=()=>{},Yo=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Oe="abcdefghijklmnopqrstuvwxyz",st="0123456789",Ft={DIGIT:st,ALPHA:Oe,ALPHA_DIGIT:Oe+Oe.toUpperCase()+st},Zo=(e=16,t=Ft.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n};function es(e){return!!(e&&B(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const ts=e=>{const t=new Array(10),n=(o,s)=>{if(ye(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[s]=o;const r=re(o)?[]:{};return le(o,(i,c)=>{const d=n(i,s+1);!ae(d)&&(r[c]=d)}),t[s]=void 0,r}}return o};return n(e,0)},ns=W("AsyncFunction"),os=e=>e&&(ye(e)||B(e))&&B(e.then)&&B(e.catch),a={isArray:re,isArrayBuffer:Ut,isBuffer:So,isFormData:Mo,isArrayBufferView:Po,isString:Oo,isNumber:Mt,isBoolean:To,isObject:ye,isPlainObject:ue,isUndefined:ae,isDate:xo,isFile:ko,isBlob:Ro,isRegExp:Jo,isFunction:B,isStream:Uo,isURLSearchParams:Lo,isTypedArray:qo,isFileList:No,forEach:le,merge:Me,extend:$o,trim:Io,stripBOM:Do,inherits:Fo,toFlatObject:Bo,kindOf:ve,kindOfTest:W,endsWith:jo,toArray:Vo,forEachEntry:zo,matchAll:Ho,isHTMLForm:Go,hasOwnProperty:ot,hasOwnProp:ot,reduceDescriptors:Dt,freezeMethods:Ko,toObjectSet:Qo,toCamelCase:Wo,noop:Xo,toFiniteNumber:Yo,findKey:Lt,global:It,isContextDefined:$t,ALPHABET:Ft,generateString:Zo,isSpecCompliantForm:es,toJSONObject:ts,isAsyncFn:ns,isThenable:os};function w(e,t,n,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),s&&(this.response=s)}a.inherits(w,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:a.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Bt=w.prototype,jt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{jt[e]={value:e}});Object.defineProperties(w,jt);Object.defineProperty(Bt,"isAxiosError",{value:!0});w.from=(e,t,n,o,s,r)=>{const i=Object.create(Bt);return a.toFlatObject(e,i,function(d){return d!==Error.prototype},c=>c!=="isAxiosError"),w.call(i,e.message,t,n,o,s),i.cause=e,i.name=e.name,r&&Object.assign(i,r),i};const ss=null;function Le(e){return a.isPlainObject(e)||a.isArray(e)}function Vt(e){return a.endsWith(e,"[]")?e.slice(0,-2):e}function rt(e,t,n){return e?e.concat(t).map(function(s,r){return s=Vt(s),!n&&r?"["+s+"]":s}).join(n?".":""):t}function rs(e){return a.isArray(e)&&!e.some(Le)}const is=a.toFlatObject(a,{},null,function(t){return/^is[A-Z]/.test(t)});function Ce(e,t,n){if(!a.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=a.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,P){return!a.isUndefined(P[m])});const o=n.metaTokens,s=n.visitor||u,r=n.dots,i=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&a.isSpecCompliantForm(t);if(!a.isFunction(s))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(a.isDate(p))return p.toISOString();if(!d&&a.isBlob(p))throw new w("Blob is not supported. Use a Buffer instead.");return a.isArrayBuffer(p)||a.isTypedArray(p)?d&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,P){let O=p;if(p&&!P&&typeof p=="object"){if(a.endsWith(m,"{}"))m=o?m:m.slice(0,-2),p=JSON.stringify(p);else if(a.isArray(p)&&rs(p)||(a.isFileList(p)||a.endsWith(m,"[]"))&&(O=a.toArray(p)))return m=Vt(m),O.forEach(function(L,I){!(a.isUndefined(L)||L===null)&&t.append(i===!0?rt([m],I,r):i===null?m:m+"[]",l(L))}),!1}return Le(p)?!0:(t.append(rt(P,m,r),l(p)),!1)}const f=[],C=Object.assign(is,{defaultVisitor:u,convertValue:l,isVisitable:Le});function h(p,m){if(!a.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),a.forEach(p,function(O,M){(!(a.isUndefined(O)||O===null)&&s.call(t,O,a.isString(M)?M.trim():M,m,C))===!0&&h(O,m?m.concat(M):[M])}),f.pop()}}if(!a.isObject(e))throw new TypeError("data must be an object");return h(e),t}function it(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Ve(e,t){this._pairs=[],e&&Ce(e,this,t)}const qt=Ve.prototype;qt.append=function(t,n){this._pairs.push([t,n])};qt.toString=function(t){const n=t?function(o){return t.call(this,o,it)}:it;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function as(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zt(e,t,n){if(!t)return e;const o=n&&n.encode||as,s=n&&n.serialize;let r;if(s?r=s(t,n):r=a.isURLSearchParams(t)?t.toString():new Ve(t,n).toString(o),r){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class ls{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){a.forEach(this.handlers,function(o){o!==null&&t(o)})}}const at=ls,Ht={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cs=typeof URLSearchParams<"u"?URLSearchParams:Ve,us=typeof FormData<"u"?FormData:null,ds=typeof Blob<"u"?Blob:null,ps=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),fs=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),G={isBrowser:!0,classes:{URLSearchParams:cs,FormData:us,Blob:ds},isStandardBrowserEnv:ps,isStandardBrowserWebWorkerEnv:fs,protocols:["http","https","file","blob","url","data"]};function ms(e,t){return Ce(e,new G.classes.URLSearchParams,Object.assign({visitor:function(n,o,s,r){return G.isNode&&a.isBuffer(n)?(this.append(o,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function hs(e){return a.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function _s(e){const t={},n=Object.keys(e);let o;const s=n.length;let r;for(o=0;o<s;o++)r=n[o],t[r]=e[r];return t}function Gt(e){function t(n,o,s,r){let i=n[r++];const c=Number.isFinite(+i),d=r>=n.length;return i=!i&&a.isArray(s)?s.length:i,d?(a.hasOwnProp(s,i)?s[i]=[s[i],o]:s[i]=o,!c):((!s[i]||!a.isObject(s[i]))&&(s[i]=[]),t(n,o,s[i],r)&&a.isArray(s[i])&&(s[i]=_s(s[i])),!c)}if(a.isFormData(e)&&a.isFunction(e.entries)){const n={};return a.forEachEntry(e,(o,s)=>{t(hs(o),s,n,0)}),n}return null}const gs={"Content-Type":void 0};function vs(e,t,n){if(a.isString(e))try{return(t||JSON.parse)(e),a.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const be={transitional:Ht,adapter:["xhr","http"],transformRequest:[function(t,n){const o=n.getContentType()||"",s=o.indexOf("application/json")>-1,r=a.isObject(t);if(r&&a.isHTMLForm(t)&&(t=new FormData(t)),a.isFormData(t))return s&&s?JSON.stringify(Gt(t)):t;if(a.isArrayBuffer(t)||a.isBuffer(t)||a.isStream(t)||a.isFile(t)||a.isBlob(t))return t;if(a.isArrayBufferView(t))return t.buffer;if(a.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return ms(t,this.formSerializer).toString();if((c=a.isFileList(t))||o.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Ce(c?{"files[]":t}:t,d&&new d,this.formSerializer)}}return r||s?(n.setContentType("application/json",!1),vs(t)):t}],transformResponse:[function(t){const n=this.transitional||be.transitional,o=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&a.isString(t)&&(o&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(c){if(i)throw c.name==="SyntaxError"?w.from(c,w.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:G.classes.FormData,Blob:G.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};a.forEach(["delete","get","head"],function(t){be.headers[t]={}});a.forEach(["post","put","patch"],function(t){be.headers[t]=a.merge(gs)});const qe=be,ws=a.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ys=e=>{const t={};let n,o,s;return e&&e.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),o=i.substring(s+1).trim(),!(!n||t[n]&&ws[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},lt=Symbol("internals");function ie(e){return e&&String(e).trim().toLowerCase()}function de(e){return e===!1||e==null?e:a.isArray(e)?e.map(de):String(e)}function Cs(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const bs=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Te(e,t,n,o,s){if(a.isFunction(o))return o.call(this,t,n);if(s&&(t=n),!!a.isString(t)){if(a.isString(o))return t.indexOf(o)!==-1;if(a.isRegExp(o))return o.test(t)}}function Es(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function As(e,t){const n=a.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(s,r,i){return this[o].call(this,t,s,r,i)},configurable:!0})})}class Ee{constructor(t){t&&this.set(t)}set(t,n,o){const s=this;function r(c,d,l){const u=ie(d);if(!u)throw new Error("header name must be a non-empty string");const f=a.findKey(s,u);(!f||s[f]===void 0||l===!0||l===void 0&&s[f]!==!1)&&(s[f||d]=de(c))}const i=(c,d)=>a.forEach(c,(l,u)=>r(l,u,d));return a.isPlainObject(t)||t instanceof this.constructor?i(t,n):a.isString(t)&&(t=t.trim())&&!bs(t)?i(ys(t),n):t!=null&&r(n,t,o),this}get(t,n){if(t=ie(t),t){const o=a.findKey(this,t);if(o){const s=this[o];if(!n)return s;if(n===!0)return Cs(s);if(a.isFunction(n))return n.call(this,s,o);if(a.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ie(t),t){const o=a.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||Te(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let s=!1;function r(i){if(i=ie(i),i){const c=a.findKey(o,i);c&&(!n||Te(o,o[c],c,n))&&(delete o[c],s=!0)}}return a.isArray(t)?t.forEach(r):r(t),s}clear(t){const n=Object.keys(this);let o=n.length,s=!1;for(;o--;){const r=n[o];(!t||Te(this,this[r],r,t,!0))&&(delete this[r],s=!0)}return s}normalize(t){const n=this,o={};return a.forEach(this,(s,r)=>{const i=a.findKey(o,r);if(i){n[i]=de(s),delete n[r];return}const c=t?Es(r):String(r).trim();c!==r&&delete n[r],n[c]=de(s),o[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return a.forEach(this,(o,s)=>{o!=null&&o!==!1&&(n[s]=t&&a.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(s=>o.set(s)),o}static accessor(t){const o=(this[lt]=this[lt]={accessors:{}}).accessors,s=this.prototype;function r(i){const c=ie(i);o[c]||(As(s,i),o[c]=!0)}return a.isArray(t)?t.forEach(r):r(t),this}}Ee.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);a.freezeMethods(Ee.prototype);a.freezeMethods(Ee);const K=Ee;function xe(e,t){const n=this||qe,o=t||n,s=K.from(o.headers);let r=o.data;return a.forEach(e,function(c){r=c.call(n,r,s.normalize(),t?t.status:void 0)}),s.normalize(),r}function Wt(e){return!!(e&&e.__CANCEL__)}function ce(e,t,n){w.call(this,e??"canceled",w.ERR_CANCELED,t,n),this.name="CanceledError"}a.inherits(ce,w,{__CANCEL__:!0});function Ss(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new w("Request failed with status code "+n.status,[w.ERR_BAD_REQUEST,w.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Ps=G.isStandardBrowserEnv?function(){return{write:function(n,o,s,r,i,c){const d=[];d.push(n+"="+encodeURIComponent(o)),a.isNumber(s)&&d.push("expires="+new Date(s).toGMTString()),a.isString(r)&&d.push("path="+r),a.isString(i)&&d.push("domain="+i),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(n){const o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Os(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ts(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Jt(e,t){return e&&!Os(t)?Ts(e,t):t}const xs=G.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let o;function s(r){let i=r;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=s(window.location.href),function(i){const c=a.isString(i)?s(i):i;return c.protocol===o.protocol&&c.host===o.host}}():function(){return function(){return!0}}();function ks(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Rs(e,t){e=e||10;const n=new Array(e),o=new Array(e);let s=0,r=0,i;return t=t!==void 0?t:1e3,function(d){const l=Date.now(),u=o[r];i||(i=l),n[s]=d,o[s]=l;let f=r,C=0;for(;f!==s;)C+=n[f++],f=f%e;if(s=(s+1)%e,s===r&&(r=(r+1)%e),l-i<t)return;const h=u&&l-u;return h?Math.round(C*1e3/h):void 0}}function ct(e,t){let n=0;const o=Rs(50,250);return s=>{const r=s.loaded,i=s.lengthComputable?s.total:void 0,c=r-n,d=o(c),l=r<=i;n=r;const u={loaded:r,total:i,progress:i?r/i:void 0,bytes:c,rate:d||void 0,estimated:d&&i&&l?(i-r)/d:void 0,event:s};u[t?"download":"upload"]=!0,e(u)}}const Ns=typeof XMLHttpRequest<"u",Us=Ns&&function(e){return new Promise(function(n,o){let s=e.data;const r=K.from(e.headers).normalize(),i=e.responseType;let c;function d(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}a.isFormData(s)&&(G.isStandardBrowserEnv||G.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(e.auth){const h=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(h+":"+p))}const u=Jt(e.baseURL,e.url);l.open(e.method.toUpperCase(),zt(u,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function f(){if(!l)return;const h=K.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),m={data:!i||i==="text"||i==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:h,config:e,request:l};Ss(function(O){n(O),d()},function(O){o(O),d()},m),l=null}if("onloadend"in l?l.onloadend=f:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(f)},l.onabort=function(){l&&(o(new w("Request aborted",w.ECONNABORTED,e,l)),l=null)},l.onerror=function(){o(new w("Network Error",w.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let p=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const m=e.transitional||Ht;e.timeoutErrorMessage&&(p=e.timeoutErrorMessage),o(new w(p,m.clarifyTimeoutError?w.ETIMEDOUT:w.ECONNABORTED,e,l)),l=null},G.isStandardBrowserEnv){const h=(e.withCredentials||xs(u))&&e.xsrfCookieName&&Ps.read(e.xsrfCookieName);h&&r.set(e.xsrfHeaderName,h)}s===void 0&&r.setContentType(null),"setRequestHeader"in l&&a.forEach(r.toJSON(),function(p,m){l.setRequestHeader(m,p)}),a.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),i&&i!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",ct(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",ct(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=h=>{l&&(o(!h||h.type?new ce(null,e,l):h),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const C=ks(u);if(C&&G.protocols.indexOf(C)===-1){o(new w("Unsupported protocol "+C+":",w.ERR_BAD_REQUEST,e));return}l.send(s||null)})},pe={http:ss,xhr:Us};a.forEach(pe,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ms={getAdapter:e=>{e=a.isArray(e)?e:[e];const{length:t}=e;let n,o;for(let s=0;s<t&&(n=e[s],!(o=a.isString(n)?pe[n.toLowerCase()]:n));s++);if(!o)throw o===!1?new w(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(a.hasOwnProp(pe,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!a.isFunction(o))throw new TypeError("adapter is not a function");return o},adapters:pe};function ke(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ce(null,e)}function ut(e){return ke(e),e.headers=K.from(e.headers),e.data=xe.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ms.getAdapter(e.adapter||qe.adapter)(e).then(function(o){return ke(e),o.data=xe.call(e,e.transformResponse,o),o.headers=K.from(o.headers),o},function(o){return Wt(o)||(ke(e),o&&o.response&&(o.response.data=xe.call(e,e.transformResponse,o.response),o.response.headers=K.from(o.response.headers))),Promise.reject(o)})}const dt=e=>e instanceof K?e.toJSON():e;function se(e,t){t=t||{};const n={};function o(l,u,f){return a.isPlainObject(l)&&a.isPlainObject(u)?a.merge.call({caseless:f},l,u):a.isPlainObject(u)?a.merge({},u):a.isArray(u)?u.slice():u}function s(l,u,f){if(a.isUndefined(u)){if(!a.isUndefined(l))return o(void 0,l,f)}else return o(l,u,f)}function r(l,u){if(!a.isUndefined(u))return o(void 0,u)}function i(l,u){if(a.isUndefined(u)){if(!a.isUndefined(l))return o(void 0,l)}else return o(void 0,u)}function c(l,u,f){if(f in t)return o(l,u);if(f in e)return o(void 0,l)}const d={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c,headers:(l,u)=>s(dt(l),dt(u),!0)};return a.forEach(Object.keys(Object.assign({},e,t)),function(u){const f=d[u]||s,C=f(e[u],t[u],u);a.isUndefined(C)&&f!==c||(n[u]=C)}),n}const Kt="1.4.0",ze={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ze[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const pt={};ze.transitional=function(t,n,o){function s(r,i){return"[Axios v"+Kt+"] Transitional option '"+r+"'"+i+(o?". "+o:"")}return(r,i,c)=>{if(t===!1)throw new w(s(i," has been removed"+(n?" in "+n:"")),w.ERR_DEPRECATED);return n&&!pt[i]&&(pt[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,i,c):!0}};function Ls(e,t,n){if(typeof e!="object")throw new w("options must be an object",w.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let s=o.length;for(;s-- >0;){const r=o[s],i=t[r];if(i){const c=e[r],d=c===void 0||i(c,r,e);if(d!==!0)throw new w("option "+r+" must be "+d,w.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new w("Unknown option "+r,w.ERR_BAD_OPTION)}}const Ie={assertOptions:Ls,validators:ze},Q=Ie.validators;class _e{constructor(t){this.defaults=t,this.interceptors={request:new at,response:new at}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=se(this.defaults,n);const{transitional:o,paramsSerializer:s,headers:r}=n;o!==void 0&&Ie.assertOptions(o,{silentJSONParsing:Q.transitional(Q.boolean),forcedJSONParsing:Q.transitional(Q.boolean),clarifyTimeoutError:Q.transitional(Q.boolean)},!1),s!=null&&(a.isFunction(s)?n.paramsSerializer={serialize:s}:Ie.assertOptions(s,{encode:Q.function,serialize:Q.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i;i=r&&a.merge(r.common,r[n.method]),i&&a.forEach(["delete","get","head","post","put","patch","common"],p=>{delete r[p]}),n.headers=K.concat(i,r);const c=[];let d=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(d=d&&m.synchronous,c.unshift(m.fulfilled,m.rejected))});const l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let u,f=0,C;if(!d){const p=[ut.bind(this),void 0];for(p.unshift.apply(p,c),p.push.apply(p,l),C=p.length,u=Promise.resolve(n);f<C;)u=u.then(p[f++],p[f++]);return u}C=c.length;let h=n;for(f=0;f<C;){const p=c[f++],m=c[f++];try{h=p(h)}catch(P){m.call(this,P);break}}try{u=ut.call(this,h)}catch(p){return Promise.reject(p)}for(f=0,C=l.length;f<C;)u=u.then(l[f++],l[f++]);return u}getUri(t){t=se(this.defaults,t);const n=Jt(t.baseURL,t.url);return zt(n,t.params,t.paramsSerializer)}}a.forEach(["delete","get","head","options"],function(t){_e.prototype[t]=function(n,o){return this.request(se(o||{},{method:t,url:n,data:(o||{}).data}))}});a.forEach(["post","put","patch"],function(t){function n(o){return function(r,i,c){return this.request(se(c||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:i}))}}_e.prototype[t]=n(),_e.prototype[t+"Form"]=n(!0)});const fe=_e;class He{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const o=this;this.promise.then(s=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](s);o._listeners=null}),this.promise.then=s=>{let r;const i=new Promise(c=>{o.subscribe(c),r=c}).then(s);return i.cancel=function(){o.unsubscribe(r)},i},t(function(r,i,c){o.reason||(o.reason=new ce(r,i,c),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new He(function(s){t=s}),cancel:t}}}const Is=He;function $s(e){return function(n){return e.apply(null,n)}}function Ds(e){return a.isObject(e)&&e.isAxiosError===!0}const $e={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($e).forEach(([e,t])=>{$e[t]=e});const Fs=$e;function Qt(e){const t=new fe(e),n=Nt(fe.prototype.request,t);return a.extend(n,fe.prototype,t,{allOwnKeys:!0}),a.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Qt(se(e,s))},n}const k=Qt(qe);k.Axios=fe;k.CanceledError=ce;k.CancelToken=Is;k.isCancel=Wt;k.VERSION=Kt;k.toFormData=Ce;k.AxiosError=w;k.Cancel=k.CanceledError;k.all=function(t){return Promise.all(t)};k.spread=$s;k.isAxiosError=Ds;k.mergeConfig=se;k.AxiosHeaders=K;k.formToJSON=e=>Gt(a.isHTMLForm(e)?new FormData(e):e);k.HttpStatusCode=Fs;k.default=k;const S=k;function Bs(e){const t=new FormData;return t.set("username",e.username),t.set("password",e.password),S.post("/auth/login",t,{headers:{"Content-Type":"multipart/form-data"}})}function Di(e){return S.post("/auth/register",e)}function js(){return S.post("/auth/logout")}function Vs(){return S.get("/user/me")}function Fi(){return S.get("/user")}function Bi(e){return S.delete(`/user/${e}`)}function qs(e,t){return S.patch(`/user/${e}/reset-password`,t,{headers:{"Content-Type":"application/json"}})}function zs(e,t){return S.patch(`user/${e}/set_api_key`,t,{headers:{"Content-Type":"application/json"}})}function Hs(e,t){return S.patch(`user/${e}/allow_context`,t,{headers:{"Content-Type":"application/json"}})}function Gs(e,t){return S.patch(`user/${e}/set_threshold`,t,{headers:{"Content-Type":"application/json"}})}function Ws(){return S.get("billing_info")}function ji(e,t){return S.post(`/user/${e}/limit`,t)}const ft={expires:"1d",path:"; path=/",domain:"",secure:"",sameSite:"; SameSite=Lax"};function Xt(e){return new RegExp(`(?:^|;\\s*)${encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")}\\s*\\=`).test(document.cookie)}function Js(e,t=null,n=null){return!e||!Xt(e)?!1:(document.cookie=`${encodeURIComponent(e)}=; expires=Thu, 01 Jan 1970 00:00:00 GMT${n?`; domain=${n}`:ft.domain}${t?`; path=${t}`:ft.path}; SameSite=Lax`,!0)}const Yt="user_auth",Ks=()=>(ee(),!!Xt(Yt)),mt=()=>{Js(Yt)},ee=ge("user",{state:()=>({user:null,savedUsername:null,savedPassword:null}),getters:{userInfo(e){return e.user}},actions:{setInfo(e){this.$patch({user:e})},setSavedLoginInfo(e,t){this.$patch({savedUsername:e,savedPassword:t})},resetInfo(){this.$reset()},async fetchUserInfo(){const e=(await Vs()).data;this.setInfo(e)},async login(e){try{await Bs(e)}catch(t){throw mt(),t}},async logout(){try{await js()}finally{this.resetInfo(),mt()}}}});function Qs(e=!1){return S.get("/conv",{params:{fetch_all:e}})}function Xs(e){return S.get("/conv/"+e)}function Ys(e){return S.delete("/conv/"+e)}function Vi(e){return S.delete("/conv/"+e+"/vanish")}function Zs(e,t){return S.patch("/conv/"+e,null,{params:{title:t}})}function qi(){let e="ws";return["ws","wss"].includes({}.VITE_API_WEBSOCKET_PROTOCOL)?e={}.VITE_API_WEBSOCKET_PROTOCOL:{}.VITE_API_WEBSOCKET_PROTOCOL==="auto"&&(e=window.location.protocol==="https:"?"wss":"ws"),`${e}://${window.location.host}/api/conv`}function zi(e,t){return S.patch(`/conv/${e}/assign/${t}`)}const Hi=ge("conversation",{state:()=>({conversations:[],conversationDetailMap:{}}),getters:{},actions:{async fetchAllConversations(){const e=(await Qs()).data;this.$patch({conversations:e})},async fetchConversationHistory(e){var o,s,r,i,c,d;if(this.conversationDetailMap.hasOwnProperty(e))return this.conversationDetailMap[e];const t=(await Xs(e)).data,n={id:e,current_node:t.current_node,title:t.title,create_time:t.create_time,mapping:{},model_name:t.model_name};for(const l in t.mapping){const u=t.mapping[l];n.mapping[l]={id:l,parent:u.parent,children:u.children,author_role:(s=(o=u.message)==null?void 0:o.author)==null?void 0:s.role,model_slug:(i=(r=u.message)==null?void 0:r.metadata)==null?void 0:i.model_slug,message:(d=(c=u.message)==null?void 0:c.content)==null?void 0:d.parts.join(`

`)}}this.$patch({conversationDetailMap:{[e]:n}})},addConversation(e){this.conversations.push(e)},async deleteConversation(e){await Ys(e),delete this.conversationDetailMap[e],this.conversations=this.conversations.filter(t=>t.conversation_id!==e)},async changeConversationTitle(e,t){await Zs(e,t),await this.fetchAllConversations(),this.conversationDetailMap.hasOwnProperty(e)&&(this.conversationDetailMap[e].title=t)},addMessageToConversation(e,t,n){if(!this.conversationDetailMap.hasOwnProperty(e))return;const o=this.conversationDetailMap[e];if(o.mapping[t.id]=t,o.mapping[n.id]=n,o.current_node===null)o.current_node=n.id;else{const s=o.mapping[o.current_node];t.parent=s.id,s.children.push(t.id),o.current_node=n.id}t.children=[n.id],n.parent=t.id}}});function er(){return S.get("/chat")}function Gi(e,t){return S.post("/chat/"+e+"/new_chat/",t,{headers:{"Content-Type":"application/json"}})}function tr(e){return S.get("/chat/"+e)}function nr(e){return S.delete("/chat/"+e)}function or(){return S.get("/verify")}function sr(e,t){return S.patch("/chat/"+e+"/new_title/"+t)}function Wi(){let e="ws";return["ws","wss"].includes({}.VITE_API_WEBSOCKET_PROTOCOL)?e={}.VITE_API_WEBSOCKET_PROTOCOL:{}.VITE_API_WEBSOCKET_PROTOCOL==="auto"&&(e=window.location.protocol==="https:"?"wss":"ws"),`${e}://${window.location.host}/api/chat`}const Ji=ge("conversationv3",{state:()=>({conversationsv3:[],conversationV3DetailMap:{}}),getters:{},actions:{async fetchAllConversationsv3(){const e=(await er()).data;this.$patch({conversationsv3:e})},async fetchConversationV3History(e){var o,s,r;if(console.log(this.conversationV3DetailMap),this.conversationV3DetailMap.hasOwnProperty(e))return this.conversationV3DetailMap[e];const t=(await tr(e)).data,n={id:e,create_time:t.create_time,messageList:[]};for(let i=0;i<t.length;i++)(o=n.messageList)==null||o.push({id:t[i].id,message:t[i].content,author_role:"user",is_image:!1}),t[i].is_image?(s=n.messageList)==null||s.push({id:t[i].id,message:"data:image/jpeg;base64,"+t[i].response,is_image:!0}):(r=n.messageList)==null||r.push({id:t[i].id,message:t[i].response,is_image:!1});this.$patch({conversationV3DetailMap:{[e]:n}})},async deleteConversationV3(e){await nr(e),delete this.conversationV3DetailMap[e],this.conversationsv3=this.conversationsv3.filter(t=>t.chat_id!==e)},async changeConversationV3Title(e,t){await sr(e,t),await this.fetchAllConversationsv3(),this.conversationV3DetailMap.hasOwnProperty(e)&&(this.conversationV3DetailMap[e].title=t)}}}),rr=pn();const ir={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ar=fn('<path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M360 94.59V296"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M443.13 212.87L296 360"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M417.41 360H216"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M299.13 443.13l-144-144"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M152 416V216"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M68.87 299.13l144-144"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M94.59 152H288"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M212.87 68.87L360 216"></path>',9),lr=[ar],cr=U({name:"ApertureOutline",render:function(t,n){return A(),x("svg",ir,lr)}}),ur={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},dr=_("path",{d:"M475.22 206.52c-10.34-48.65-37.76-92.93-77.22-124.68A227.4 227.4 0 0 0 255.82 32C194.9 32 138 55.47 95.46 98.09C54.35 139.33 31.82 193.78 32 251.37a215.66 215.66 0 0 0 35.65 118.76l4.35 6.05L48 480l114.8-28.56s2.3.77 4 1.42s16.33 6.26 31.85 10.6c12.9 3.6 39.74 9 60.77 9c59.65 0 115.35-23.1 156.83-65.06C457.36 365.77 480 310.42 480 251.49a213.5 213.5 0 0 0-4.78-44.97zM160 288a32 32 0 1 1 32-32a32 32 0 0 1-32 32zm96 0a32 32 0 1 1 32-32a32 32 0 0 1-32 32zm96 0a32 32 0 1 1 32-32a32 32 0 0 1-32 32z",fill:"currentColor"},null,-1),pr=[dr],fr=U({name:"ChatbubbleEllipsesSharp",render:function(t,n){return A(),x("svg",ur,pr)}}),mr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},hr=_("circle",{cx:"256",cy:"256",r:"48",fill:"currentColor"},null,-1),_r=_("circle",{cx:"256",cy:"416",r:"48",fill:"currentColor"},null,-1),gr=_("circle",{cx:"256",cy:"96",r:"48",fill:"currentColor"},null,-1),vr=[hr,_r,gr],wr=U({name:"EllipsisVertical",render:function(t,n){return A(),x("svg",mr,vr)}}),yr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Cr=_("path",{d:"M478.33 433.6l-90-218a22 22 0 0 0-40.67 0l-90 218a22 22 0 1 0 40.67 16.79L316.66 406h102.67l18.33 44.39A22 22 0 0 0 458 464a22 22 0 0 0 20.32-30.4zM334.83 362L368 281.65L401.17 362z",fill:"currentColor"},null,-1),br=_("path",{d:"M267.84 342.92a22 22 0 0 0-4.89-30.7c-.2-.15-15-11.13-36.49-34.73c39.65-53.68 62.11-114.75 71.27-143.49H330a22 22 0 0 0 0-44H214V70a22 22 0 0 0-44 0v20H54a22 22 0 0 0 0 44h197.25c-9.52 26.95-27.05 69.5-53.79 108.36c-31.41-41.68-43.08-68.65-43.17-68.87a22 22 0 0 0-40.58 17c.58 1.38 14.55 34.23 52.86 83.93c.92 1.19 1.83 2.35 2.74 3.51c-39.24 44.35-77.74 71.86-93.85 80.74a22 22 0 1 0 21.07 38.63c2.16-1.18 48.6-26.89 101.63-85.59c22.52 24.08 38 35.44 38.93 36.1a22 22 0 0 0 30.75-4.9z",fill:"currentColor"},null,-1),Er=[Cr,br],Ar=U({name:"Language",render:function(t,n){return A(),x("svg",yr,Er)}}),Sr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Pr=_("path",{d:"M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 0 0 3.8.4c8.3 0 11.5-6.1 11.5-11.4c0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 0 1-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5c-10.2-26.5-24.9-33.6-24.9-33.6c-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8c11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0 0 25.6-6c2-14.8 7.8-24.9 14.2-30.7c-49.7-5.8-102-25.5-102-113.5c0-25.1 8.7-45.6 23-61.6c-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 0 1 5-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 0 1 112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 0 1 5 .5c12.2 31.6 4.5 55 2.2 60.8c14.3 16.1 23 36.6 23 61.6c0 88.2-52.4 107.6-102.3 113.3c8 7.1 15.2 21.1 15.2 42.5c0 30.7-.3 55.5-.3 63c0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 0 0 4-.4C415.9 449.2 480 363.1 480 261.7C480 134.9 379.7 32 256 32z",fill:"currentColor"},null,-1),Or=[Pr],Tr=U({name:"LogoGithub",render:function(t,n){return A(),x("svg",Sr,Or)}}),xr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},kr=_("path",{d:"M256 256a112 112 0 1 0-112-112a112 112 0 0 0 112 112zm0 32c-69.42 0-208 42.88-208 128v64h416v-64c0-85.12-138.58-128-208-128z",fill:"currentColor"},null,-1),Rr=[kr],Nr=U({name:"PersonSharp",render:function(t,n){return A(),x("svg",xr,Rr)}}),Ur={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Mr=_("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z",fill:"currentColor"},null,-1),Lr=[Mr],Ir=U({name:"ChatFilled",render:function(t,n){return A(),x("svg",Ur,Lr)}}),$r={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Dr=_("path",{d:"M11.01 3.05C6.51 3.54 3 7.36 3 12a9 9 0 0 0 9 9c4.63 0 8.45-3.5 8.95-8c.09-.79-.78-1.42-1.54-.95A5.403 5.403 0 0 1 11.1 7.5c0-1.06.31-2.06.84-2.89c.45-.67-.04-1.63-.93-1.56z",fill:"currentColor"},null,-1),Fr=[Dr],Br=U({name:"DarkModeRound",render:function(t,n){return A(),x("svg",$r,Fr)}}),jr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Vr=_("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5s5-2.24 5-5s-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0a.996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0a.996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41a.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41a.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z",fill:"currentColor"},null,-1),qr=[Vr],zr=U({name:"LightModeRound",render:function(t,n){return A(),x("svg",jr,qr)}}),Hr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Gr=_("circle",{cx:"10",cy:"8",r:"4",fill:"currentColor"},null,-1),Wr=_("path",{d:"M10.67 13.02c-.22-.01-.44-.02-.67-.02c-2.42 0-4.68.67-6.61 1.82c-.88.52-1.39 1.5-1.39 2.53V20h9.26a6.963 6.963 0 0 1-.59-6.98zM20.75 16c0-.22-.03-.42-.06-.63l1.14-1.01l-1-1.73l-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49l-1 1.73l1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01l1 1.73l1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49l1-1.73l-1.14-1.01c.03-.21.06-.41.06-.63zM17 18c-1.1 0-2-.9-2-2s.9-2 2-2s2 .9 2 2s-.9 2-2 2z",fill:"currentColor"},null,-1),Jr=[Gr,Wr],Kr=U({name:"ManageAccountsFilled",render:function(t,n){return A(),x("svg",Hr,Jr)}}),Qr="modulepreload",Xr=function(e){return"/"+e},ht={},D=function(t,n,o){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=Xr(r),r in ht)return;ht[r]=!0;const i=r.endsWith(".css"),c=i?'[rel="stylesheet"]':"";if(!!o)for(let u=s.length-1;u>=0;u--){const f=s[u];if(f.href===r&&(!i||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${c}`))return;const l=document.createElement("link");if(l.rel=i?"stylesheet":Qr,i||(l.as="script",l.crossOrigin=""),l.href=r,document.head.appendChild(l),i)return new Promise((u,f)=>{l.addEventListener("load",u),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};function Yr(e){e.beforeEach(async(t,n,o)=>{const s=ee();if(Ks())if(s.user!=null)o();else try{await s.fetchUserInfo(),o()}catch(r){console.error(r),await s.logout(),t.name!=="login"?o({name:"login",query:{redirect:t.name,...t.query}}):o()}else o()})}const Zr=Z.global.t;function ei(e){e.beforeEach(async(t,n,o)=>{const s=ee();if(!t.meta.requiresAuth)o();else if(s.user===null)H.error(Zr("errors.userNotLogin")),o({name:"login",query:{redirect:t.name,...t.query}});else{const r=s.user.is_superuser?"superuser":"user";t.meta.roles.find(i=>i===r)===void 0?o({name:"403"}):(t.fullPath==="/conversationv3"?or().then(()=>{o()}).catch(()=>{o(!1)}):o(),o())}})}function ti(e){Yr(e),ei(e)}const X=mn({history:hn(),routes:[{path:"/",redirect:"home"},{path:"/home",name:"home",component:()=>D(()=>import("./home-8907efbf.js"),["assets/home-8907efbf.js","assets/vue-c727071f.js","assets/naive_ui-1fdfc3bf.js"]),meta:{requiresAuth:!1,roles:["superuser","user"]}},{path:"/login",name:"login",component:()=>D(()=>import("./index-d445b519.js"),["assets/index-d445b519.js","assets/vue-c727071f.js","assets/naive_ui-1fdfc3bf.js"]),meta:{requiresAuth:!1,roles:["superuser","user"]}},{path:"/conversation",name:"conversation",component:()=>D(()=>import("./index-6d5b111e.js"),["assets/index-6d5b111e.js","assets/vue-c727071f.js","assets/prompt-af8b533b.js","assets/naive_ui-1fdfc3bf.js","assets/FileSaver.min-3c525abe.js","assets/HistoryContent.vue_vue_type_script_setup_true_lang-6de79309.js","assets/conversation-45822fe5.js","assets/HistoryContent-b0cc8c7e.css","assets/index-0479499a.css"]),meta:{requiresAuth:!0,roles:["superuser","user"]}},{path:"/conversationv3",name:"conversationv3",component:()=>D(()=>import("./index-e9301701.js"),["assets/index-e9301701.js","assets/vue-c727071f.js","assets/prompt-af8b533b.js","assets/naive_ui-1fdfc3bf.js","assets/FileSaver.min-3c525abe.js","assets/conversation-45822fe5.js","assets/index-c0f5de7a.css"]),meta:{requiresAuth:!0,roles:["superuser","user"]}},{path:"/conv/:conversation_id",name:"conversationHistory",component:()=>D(()=>import("./history-viewer-a0ff8588.js"),["assets/history-viewer-a0ff8588.js","assets/HistoryContent.vue_vue_type_script_setup_true_lang-6de79309.js","assets/vue-c727071f.js","assets/naive_ui-1fdfc3bf.js","assets/conversation-45822fe5.js","assets/HistoryContent-b0cc8c7e.css"]),meta:{requiresAuth:!0,roles:["superuser","user"]}},{path:"/admin",name:"admin",redirect:"/admin/system",component:()=>D(()=>import("./index-86583128.js"),["assets/index-86583128.js","assets/vue-c727071f.js","assets/naive_ui-1fdfc3bf.js"]),meta:{requiresAuth:!0,roles:["superuser"]},children:[{path:"system",name:"systemManagement",component:()=>D(()=>import("./system_manager-7918c9f1.js"),["assets/system_manager-7918c9f1.js","assets/system-e3daaa5f.js","assets/vue-c727071f.js","assets/naive_ui-1fdfc3bf.js"])},{path:"prompt",name:"promptManagement",component:()=>D(()=>import("./prompt_manager-007c83aa.js"),["assets/prompt_manager-007c83aa.js","assets/prompt-af8b533b.js","assets/TrashOutline-80d05170.js","assets/vue-c727071f.js","assets/Pencil-002fd4d9.js","assets/naive_ui-1fdfc3bf.js"])},{path:"user",name:"userManagement",component:()=>D(()=>import("./user_manager-28bcd755.js"),["assets/user_manager-28bcd755.js","assets/vue-c727071f.js","assets/naive_ui-1fdfc3bf.js","assets/TrashOutline-80d05170.js","assets/Pencil-002fd4d9.js"])},{path:"conversation",name:"conversationManagement",component:()=>D(()=>import("./conversation_manager-4ae2d1e0.js"),["assets/conversation_manager-4ae2d1e0.js","assets/vue-c727071f.js","assets/naive_ui-1fdfc3bf.js","assets/TrashOutline-80d05170.js"])},{path:"log",name:"logViewer",component:()=>D(()=>import("./log_viewer-27b5d69f.js"),["assets/log_viewer-27b5d69f.js","assets/system-e3daaa5f.js","assets/vue-c727071f.js","assets/naive_ui-1fdfc3bf.js","assets/log_viewer-b05aac6c.css"])}]},{path:"/redirect",name:"redirectWrapper",children:[{path:"/redirect/:path",name:"Redirect",component:()=>D(()=>import("./index-bc83aa88.js"),["assets/index-bc83aa88.js","assets/vue-c727071f.js"]),meta:{requiresAuth:!1,roles:["superuser","user"]}}]},{path:"/error",name:"errorPageWrapper",children:[{path:"/error/403",name:"403",component:()=>D(()=>import("./403-c308c33b.js"),["assets/403-c308c33b.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/vue-c727071f.js","assets/naive_ui-1fdfc3bf.js"]),meta:{requiresAuth:!1,roles:["superuser","user"]}},{path:"/error/404",name:"404",component:()=>D(()=>import("./404-4f79737b.js"),["assets/404-4f79737b.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/vue-c727071f.js","assets/naive_ui-1fdfc3bf.js"]),meta:{requiresAuth:!1,roles:["superuser","user"]}}]},{path:"/:pathMatch(.*)*",name:"NotFound",redirect:"/error/404"}],scrollBehavior(){return{top:0}}});ti(X);const ni={asking:"commons.askingChatStatus",queueing:"commons.queueingChatStatus",idling:"commons.idlingChatStatus"},oi={class:"flex flex-row justify-between content-center"},si=U({__name:"UserProfileCard",setup(e){const t=Z.global.t;j({});const o=ee().user,s=["id","username","email","nickname","is_superuser","active_time","chat_status"],r=d=>["id","username","email"].includes(d)?d:t(`labels.${d}`),i=(d,l)=>["is_superuser"].includes(d)?t(l?"commons.yes":"commons.no"):d==="active_time"?l?new Date(l+"Z").toLocaleString():t("commons.neverActive"):d==="chat_status"?t(ni[l]):l,c=oe(()=>o?s.map(d=>({title:r(d),value:i(d,o[d])})):[]);return(d,l)=>{const u=yt,f=Ct,C=bt;return A(),J(C,{"content-style":"padding: 0;"},{default:y(()=>[(A(!0),x(gt,null,vt(c.value,(h,p)=>(A(),J(f,{hoverable:"","show-divider":"",key:p},{default:y(()=>[v(u,null,{default:y(()=>[_("div",oi,[_("div",null,F(h.title)+":",1),_("div",null,F(h.value),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1})}}}),ri={key:0},ii={class:"flex flex-row justify-between content-center",style:{"margin-top":"10px"}},ai={style:{"margin-top":"-5px"}},li={key:1},ci={class:"flex flex-row justify-between content-center",style:{"margin-top":"10px"}},ui={key:2},di={class:"flex flex-row justify-between content-center",style:{"margin-top":"10px"}},pi={style:{"margin-top":"-5px"}},fi={key:3,class:"flex flex-row justify-between content-center"},mi=U({__name:"AccountInfo",setup(e){const t=Z.global.t;j({});const n=ee(),o=n.user,s=["api_key","allow_context","threshold","can_use_paid","can_use_gpt4","max_conv_count","available_ask_count","available_gpt4_ask_count","api_key_balance"],r=g=>["api_key","allow_context","threshold"].includes(g)?g:["api_key_balance"].includes(g)?"apiKey余额":t(`labels.${g}`),i=j({total_granted:0,used_amount:0,total_available:0});async function c(){Ws().then(g=>{i.value.total_granted=g.data[0].total_granted,i.value.total_available=g.data[0].total_available})}const d=(g,E)=>["can_use_paid","can_use_gpt4"].includes(g)?t(E?"commons.yes":"commons.no"):g==="max_conv_count"||g==="available_ask_count"||g==="available_gpt4_ask_count"?E===-1?t("commons.unlimited"):E:g==="api_key_balance"?""+i.value.total_available.toFixed(5)+" / "+i.value.total_granted:E,l=oe(()=>o?(c(),s.map(g=>({title:r(g),value:d(g,o[g])}))):[]),u=j(l.value[0].value),f=j(!1),C=()=>{const g={api_key:u.value};console.log(u.value),f.value=!0,zs(n.user.id,JSON.stringify(g)).then(E=>{console.log(E),E.status===200&&(H.success("修改成功！"),n.fetchUserInfo(),f.value=!1)}).catch(E=>{console.log(E)})},h=()=>{const g={allow_context:O.value};Hs(n.user.id,JSON.stringify(g)).then(E=>{console.log(E),E.status===200&&(H.success("修改成功！"),n.fetchUserInfo(),f.value=!1)}).catch(E=>{console.log(E)})},p=g=>{const E={threshold:g};console.log(E),Gs(n.user.id,JSON.stringify(E)).then($=>{console.log($),$.status===200&&(H.success("修改成功！"),n.fetchUserInfo(),f.value=!1)}).catch($=>{console.log($)})},m=j(l.value[2].value),P=()=>{isNaN(m.value)?H.warning("只能输入数字！"):p(Number(m.value))},O=j(),M=g=>{g.target.value==="true"?(O.value=!0,h(),I(!0)):g.target.value==="false"&&(O.value=!1,h(),I(!1))},L=j(!0),I=g=>{g===!0?L.value=!1:L.value=!0};return I(l.value[1].value),(g,E)=>{const $=De,b=Fe,R=En,V=An,en=Et,tn=yt,nn=Ct,on=bt;return A(),J(on,{"content-style":"padding: 0;",loading:f.value},{default:y(()=>[(A(!0),x(gt,null,vt(l.value,(q,sn)=>(A(),J(nn,{hoverable:"","show-divider":"",key:sn},{default:y(()=>[v(tn,null,{default:y(()=>[q.title=="api_key"?(A(),x("div",ri,[_("div",ii,[_("div",null,F(q.title)+":",1),_("div",ai,[v(R,null,{default:y(()=>[v($,{value:u.value,"onUpdate:value":E[0]||(E[0]=Se=>u.value=Se),placeholder:"null"},null,8,["value"]),v(b,{onClick:C,ghost:""},{default:y(()=>[Y(" 保存 ")]),_:1})]),_:1})])])])):q.title=="allow_context"?(A(),x("div",li,[_("div",ci,[_("div",null,F(q.title)+":",1),_("div",null,[v(en,null,{default:y(()=>[v(V,{checked:q.value===!0,value:"true",name:"basic-demo",onChange:M},{default:y(()=>[Y(" 是 ")]),_:2},1032,["checked"]),v(V,{checked:q.value===!1,value:"false",name:"basic-demo",onChange:M},{default:y(()=>[Y(" 否 ")]),_:2},1032,["checked"])]),_:2},1024)])])])):q.title=="threshold"?(A(),x("div",ui,[_("div",di,[_("div",null,F(q.title)+":",1),_("div",pi,[v(R,null,{default:y(()=>[v($,{value:m.value,"onUpdate:value":E[1]||(E[1]=Se=>m.value=Se),placeholder:"null",disabled:L.value},null,8,["value","disabled"]),v(b,{onClick:P,ghost:"",disabled:L.value},{default:y(()=>[Y(" 保存 ")]),_:1},8,["disabled"])]),_:1})])])])):(A(),x("div",fi,[_("div",null,F(q.title)+":",1),_("div",null,F(q.value),1)]))]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["loading"])}}}),hi={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","enable-background":"new 0 0 512 512","xml:space":"preserve"},_i=_("path",{d:`M296,136c0-22.002-17.998-40-40-40s-40,17.998-40,40s17.998,40,40,40S296,158.002,296,136z M296,376\r
	c0-22.002-17.998-40-40-40s-40,17.998-40,40s17.998,40,40,40S296,398.002,296,376z M296,256c0-22.002-17.998-40-40-40\r
	s-40,17.998-40,40s17.998,40,40,40S296,278.002,296,256z`},null,-1),gi=[_i],vi=U({name:"MdMore",render:function(t,n){return A(),x("svg",hi,gi)}}),T=Z.global.t,wi={"text-davinci-002-render-sha":T("commons.shaModel"),"text-davinci-002-render-paid":T("commons.paidModel"),"gpt-4":T("commons.gpt4Model")},Ki=e=>wi[e]||e,Qi=e=>e==-1?T("commons.unlimited"):`${e}`,Xi=(e,t,n,o)=>z(St,{trigger:"hover",options:[{label:T("commons.delete"),key:"delete",props:{onClick:()=>t(e.conversation_id)}},{label:T("commons.rename"),key:"rename",props:{onClick:()=>n(e.conversation_id)}},{label:T("commons.download"),key:"download",props:{onClick:()=>o()}}]},{default:()=>z(Fe,{size:"small",quaternary:!0,circle:!0},{default:()=>z(At,null,{default:()=>z(vi)})})}),Zt=(e,t,n,o,s)=>{let r="";const i=ne.info({title:e,positiveText:T("commons.confirm"),negativeText:T("commons.cancel"),content:()=>z(De,{onInput:c=>r=c,autofocus:!0,placeholder:t}),onPositiveClick(){return i.loading=!0,new Promise(c=>{n(r).then(()=>{o(),c(!0)}).catch(()=>{s(),c(!0)}).finally(()=>{i.loading=!1})})}})},yi=e=>{var o,s;const t=ee();let n=[];return e==="conversation"?n=[{label:T("commons.shaModel"),value:"text-davinci-002-render-sha"}]:n=[{label:"gpt-3.5-turbo",value:"gpt-3.5-turbo"},{label:"gpt-3.5-turbo-0301",value:"gpt-3.5-turbo-0301"},{label:"gpt-4",value:"gpt-4"},{label:"gpt-4-0314",value:"gpt-4-0314"},{label:"gpt-4-32k",value:"gpt-4-32k"},{label:"gpt-4-32k-0314",value:"gpt-4-32k-0314"}],(o=t.user)!=null&&o.can_use_paid&&n.push({label:T("commons.paidModel"),value:"text-davinci-002-render-paid"}),(s=t.user)!=null&&s.can_use_gpt4&&n.push({label:T("commons.gpt4Model"),value:"gpt-4"}),n},Yi=e=>{let t="",n="";const o=ne.info({title:T("commons.newConversation"),positiveText:T("commons.confirm"),negativeText:T("commons.cancel"),content:()=>z("div",{style:"display: flex; flex-direction: column; gap: 16px;"},[z(De,{onInput:s=>t=s,autofocus:!0,placeholder:T("tips.conversationTitle")}),z(Sn,{placeholder:T("tips.whetherUsePaidModel"),"onUpdate:value":s=>n=s,options:yi("conversation")})]),onPositiveClick(){return o.loading=!0,new Promise(s=>{e(t,n).then(()=>{s(!0)}).catch(()=>{s(!0)}).finally(()=>{o.loading=!1})})}})},Zi=(e,t,n,o)=>{Zt(T("commons.rename"),T("tips.rename"),t,n,o)},Ci=(e,t,n)=>{Zt(T("commons.resetPassword"),T("tips.resetPassword"),e,t,n)},bi={href:"/",style:{"text-decoration":"none",color:"inherit"}},Ei={class:"hidden sm:block"},Ai={class:"h-full inline-block flex",href:"https://github.com/ncepu-iDealStudio/aihelper",target:"_blank"},Si={class:"space-x-2"},Pi={key:3,class:"inline-block"},Oi={class:"hidden sm:inline mr-1"},Ti={key:4,class:"text-gray-500 inline-block"},xi=U({__name:"PageHeader",setup(e){const{t}=_n(),n=ee(),o=Rt(),s=gn(),r="v0.1.0",i=oe(()=>s.path.startsWith("/admin")),c=oe(()=>o.theme=="dark"?Br:zr),d=()=>{o.toggleTheme()},l=[{label:"简体中文",key:"zh-CN",props:{onClick:()=>{o.setLanguage("zh-CN")}}},{label:"English",key:"en-US",props:{onClick:()=>{o.setLanguage("en-US")}}}],u=()=>[{label:t("commons.userProfile"),key:"profile",props:{onClick:()=>ne.info({title:t("commons.userProfile"),content:()=>z(si,{},{})})}},{label:"账户信息",key:"accountInfo",props:{onClick:()=>ne.info({title:"账户信息",content:()=>z(mi,{},{})})}},{label:t("commons.resetPassword"),key:"resetpwd",props:{onClick:f}},{label:t("commons.logout"),key:"logout",props:{onClick:()=>ne.info({title:t("commons.logout"),content:t("tips.logoutConfirm"),positiveText:t("commons.confirm"),negativeText:t("commons.cancel"),onPositiveClick:async()=>{await n.logout(),H.success(t("commons.logoutSuccess")),await X.push({path:"/login"})}})}}],f=()=>{Ci(async p=>{const m={user_id:n.user.id,new_password:p};await qs(n.user.id,JSON.stringify(m))},()=>{H.info(t("tips.resetUserPasswordSuccess"))},()=>{H.error(t("tips.resetUserPasswordFailed"))})},C=async()=>{i.value?await X.push({name:"conversation"}):await X.push({name:"admin"})},h=()=>{s.fullPath==="/conversation"?X.push("/conversationv3"):X.push("/conversation")};return(p,m)=>{const P=At,O=Pn,M=Et,L=On,I=Fe,g=Tn,E=St,$=xn;return A(),J($,null,{title:y(()=>[v(M,{align:"center"},{default:y(()=>[_("div",null,[_("a",bi,F(p.$t("commons.siteTitle")),1)]),_("div",Ei,[_("a",Ai,[v(P,{color:N(o).theme=="dark"?"white":"black",component:N(Tr)},null,8,["color","component"])])]),v(O,{bordered:!1,type:"success",size:"small",class:"hidden sm:inline-flex"},{default:y(()=>[Y(F(r))]),_:1})]),_:1})]),avatar:y(()=>[v(L,{src:"/chatgpt-icon.svg"})]),extra:y(()=>[v(M,null,{default:y(()=>{var b;return[_("div",Si,[N(s).fullPath==="/conversationv3"?(A(),J(g,{key:0},{trigger:y(()=>[v(I,{circle:"",class:"ml-2",onClick:m[0]||(m[0]=R=>h())},{default:y(()=>[v(P,{component:N(cr)},null,8,["component"])]),_:1})]),default:y(()=>[Y(" "+F(p.$t("commons.toSharedMode")),1)]),_:1})):Pe("",!0),N(s).fullPath==="/conversation"?(A(),J(g,{key:1},{trigger:y(()=>[v(I,{circle:"",class:"ml-2",onClick:m[1]||(m[1]=R=>h())},{default:y(()=>[v(P,{component:N(fr)},null,8,["component"])]),_:1})]),default:y(()=>[Y(" "+F(p.$t("commons.toIndependentMode")),1)]),_:1})):Pe("",!0),(b=N(n).user)!=null&&b.is_superuser?(A(),J(I,{key:2,circle:"",onClick:C},{default:y(()=>[v(P,{component:i.value?N(Ir):N(Kr)},null,8,["component"])]),_:1})):Pe("",!0),v(I,{circle:"",onClick:d},{default:y(()=>[v(P,{component:c.value},null,8,["component"])]),_:1}),v(E,{options:l,placement:"bottom-start"},{default:y(()=>[v(I,{circle:""},{default:y(()=>[v(P,{component:N(Ar)},null,8,["component"])]),_:1})]),_:1}),N(n).user?(A(),x("div",Pi,[v(E,{options:u(),placement:"bottom-start"},{default:y(()=>[v(I,{class:"ml-2",style:{"border-radius":"20px"}},{default:y(()=>[_("span",Oi,[v(P,{component:N(Nr)},null,8,["component"]),Y(" "+F(N(n).user.nickname),1)]),v(P,{component:N(wr)},null,8,["component"])]),_:1})]),_:1},8,["options"])])):(A(),x("div",Ti,F(p.$t("commons.notLogin")),1))])]}),_:1})]),_:1})}}}),ki={class:"w-full lg:w-screen-lg mx-auto h-screen flex flex-col"},Ri={class:"my-4"},Ni=U({__name:"App",setup(e){const t=Rt(),n=oe(()=>t.theme=="dark"?wt:{});return(o,s)=>{const r=kn,i=vn("router-view"),c=Rn;return A(),J(c,{theme:n.value},{default:y(()=>[v(r),_("div",ki,[_("div",Ri,[v(xi,{class:"mx-2 lg:mx-0"})]),v(i)])]),_:1},8,["theme"])}}});const te=Z.global.t;S.defaults.baseURL="/api/";S.interceptors.request.use(e=>e,e=>Promise.reject(e));const Ui=[200,201,204];S.interceptors.response.use(e=>{if([201,204].includes(e.status))return e;const t=e.data;if(!Ui.includes(t.code)){console.log("Error: ",t);let n=`${t.code}`;return t.message&&(n+=`: ${te(t.message)}`),H.error(n,{duration:5*1e3}),[401].includes(t.code)&&!["/auth/login","/auth/logout"].includes(e.config.url||"")&&ne.error({title:te("errors.loginExpired"),content:te("tips.loginExpired"),positiveText:te("commons.confirm"),negativeText:te("commons.stayInCurrentPage"),onPositiveClick(){ee().logout().then(()=>{X.push({name:"login"})}),window.location.reload()}}),Promise.reject(t)}return e.data=t.result,e},e=>(H.error(e.msg&&te(e.msg)||"Request Error",{duration:5*1e3}),console.error("Request Error",e),Promise.reject(e)));const Ae=wn(Ni);Ae.use(X);Ae.use(rr);Ae.use(Z);Ae.mount("#app");export{Ys as A,Vi as B,zi as C,vi as M,D as _,Hi as a,ne as b,Ki as c,Xi as d,Yi as e,qi as f,Qi as g,Ji as h,Z as i,Gi as j,Wi as k,$i as l,H as m,Xs as n,S as o,Zi as p,Rt as q,Fi as r,ni as s,Bi as t,ee as u,Ci as v,ji as w,Di as x,qs as y,Qs as z};
//# sourceMappingURL=index-c5ed8602.js.map
